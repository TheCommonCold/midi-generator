{"version":3,"sources":["components/DisplayNotes.jsx","actions/actionTypes.js","actions/populationActions.js","components/MidiDisplay.jsx","components/Grid.jsx","genetic/genome.js","genetic/rythm.js","genetic/note.js","genetic/chords.js","genetic/synth.js","genetic/progression.js","genetic/population.js","components/NewGeneration.jsx","components/ControlPanel.jsx","components/Test.jsx","components/App.js","reportWebVitals.js","reducers/populationReducer.js","reducers/index.js","store/store.js","index.js"],"names":["DisplayNotes","progression","max","min","useState","cols","setCols","useEffect","height","baseLine","length","j","rythm","notes","chord","root","map","note","hight","rows","i","includes","push","style","toString","width","backgroundColor","reverse","Row","className","React","memo","ADD_SPECIMAN","SET_SPECIMAN_SCORE","DELETE_POPULATION","SET_SPECIMAN_PLAYING","addSpeciman","speciman","type","payload","setSpecimanScore","index","score","deletePopulation","MidiDisplay","dispatch","useDispatch","play","setSpecimanPlaying","scoreMeter","tempScore","Container","color","amIPlaying","onClick","fontSize","download","Grid","population","useSelector","state","populationFormatted","setPopulationFormatted","arr","splice","Math","Jumbotron","row","Col","Genome","chords","scale","chordNotes","flat","reduce","a","b","this","switches","rythms","mapRythm","input","output","sum","rythmMap","currentValue","parseInt","constructRythm","window","currentLength","rythmStructure","previousValue","diff","randomNumber","floor","random","beginning","notesMap","Note","start","duration","end","octave","maj","scales","major","mode","minor","RandomChord","scaleType","numberOfNotes","jazziness","randomNote","rootNote","transposed","dispersion","overload","choice","randomVoicing","x","gain","Tone","toDestination","filter","frequency","rolloff","Q","connect","isPlaying","tempo","getPlaying","setPlaying","getTempo","synth","oscillator","count","spread","envelope","attack","decay","sustain","release","createRandomProgression","noteLengths","progressionLength","lengths","genome","Progression","callback","sync","getAllNotes","triggerAttack","triggerRelease","timeout","setTimeout","releaseAll","stop","cancel","whichOne","clearTimeout","JSON","stringify","thisNotes","counter","track","midiWriter","Track","addEvent","NoteEvent","pitch","event","sequential","blob","write","Writer","Blob","buildFile","FileSaver","saveAs","mutationChance","mutateScale","mutateRythm","mutateMelody","p","newRythm","tmp","newScale","transpose","joinChord","tempNewRythm","tempNotes","breakChord","avaibleRythms","forEach","round","chordsToJoin","constructVoicing","createRoulette","scores","pickSpeciman","roulette","pick","acc","cross","prog1","prog2","prog1Transposed","prog2Transposed","notes1","notes2","timeline","ends","sort","crossRythms","newNotes","buildNotes","originalScale","newTimeline","newChords","candidates","existsInWindow","Set","crossMelodies","transposedRoot","indexOf","slice","NewGeneration","updateGeneration","params","Button","variant","populationSize","newPopulation","pick1","pick2","mutated","mutate","decision","compare","newGeneration","windowmin","windowmax","ControlPanel","generation","setGeneration","setState","settempo","disabled","handleChange","e","value","parseFloat","target","name","restart","size","createPopulation","TextField","InputProps","inputProps","label","onChange","InputLabel","shrink","Select","MenuItem","Test","child","setChild","theme","createMuiTheme","palette","primary","main","secondary","App","ThemeProvider","path","whyDidYouRender","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","populationReducer","action","item","combineReducers","createStore","rootReducer","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.dc880077.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Row } from \"reactstrap\";\r\n\r\nexport function DisplayNotes({ progression, max, min }) {\r\n  const [cols, setCols] = useState([]);\r\n  useEffect(() => {\r\n    const height = max;\r\n    const baseLine = min;\r\n    let cols = [];\r\n    let length = 0;\r\n    for (let j = 0; j < progression.rythm.length; j++) {\r\n      length += progression.rythm[j];\r\n    }\r\n    for (let j = 0; j < progression.notes.length; j++) {\r\n      const chord = [\r\n        ...progression.notes[j].chord,\r\n        progression.notes[j].root,\r\n      ].map((note) => note.hight);\r\n      let rows = [];\r\n      for (let i = baseLine; i <= height; i++) {\r\n        if (chord.includes(i))\r\n          rows.push(\r\n            <div\r\n              key={j.toString() + i.toString()}\r\n              style={{\r\n                height: ((1 / (height - baseLine + 1)) * 100).toString() + \"%\",\r\n                width: \"100%\",\r\n                backgroundColor: \"#c62828\",\r\n              }}\r\n            ></div>\r\n          );\r\n        else\r\n          rows.push(\r\n            <div\r\n              key={j.toString() + i.toString()}\r\n              style={{\r\n                height: ((1 / (height - baseLine + 1)) * 100).toString() + \"%\",\r\n                width: \"100%\",\r\n              }}\r\n            ></div>\r\n          );\r\n      }\r\n      cols.push(\r\n        <div\r\n          key={j}\r\n          style={{\r\n            height: \"100%\",\r\n            width: ((progression.rythm[j] / length) * 100).toString() + \"%\",\r\n          }}\r\n        >\r\n          {rows.reverse()}\r\n        </div>\r\n      );\r\n    }\r\n    setCols(cols);\r\n  }, [progression, max, min]);\r\n  return <Row className=\"w-100 m-0 h-100\">{cols}</Row>;\r\n}\r\n\r\nexport default React.memo(DisplayNotes);\r\n","export const ADD_SPECIMAN = \"ADD_SPECIMAN\";\r\nexport const SET_SPECIMAN_SCORE = \"SET_SPECIMAN_SCORE\";\r\nexport const DELETE_POPULATION = \"DELETE_POPULATION\";\r\nexport const SET_SPECIMAN_PLAYING = \"SET_SPECIMAN_PLAYING\";","import { ADD_SPECIMAN, SET_SPECIMAN_SCORE, DELETE_POPULATION, SET_SPECIMAN_PLAYING } from \"./actionTypes.js\";\r\n\r\nexport const addSpeciman = (speciman) => ({ \r\n    type: ADD_SPECIMAN, \r\n    payload: { speciman } \r\n});\r\n\r\nexport const setSpecimanScore = ( {index, score} ) => ({ \r\n    type: SET_SPECIMAN_SCORE, \r\n    payload: { index, score } \r\n});\r\n\r\nexport const setSpecimanPlaying = ( {index} ) => ({ \r\n    type: SET_SPECIMAN_PLAYING, \r\n    payload: { index } \r\n});\r\n\r\nexport const deletePopulation = ( ) => ({ \r\n    type: DELETE_POPULATION\r\n});","import React from \"react\";\r\nimport { Container, Row } from \"reactstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport PlayCircleOutlineIcon from \"@material-ui/icons/PlayCircleOutline\";\r\nimport PauseCircleOutlineIcon from \"@material-ui/icons/PauseCircleOutline\";\r\nimport SaveAltIcon from \"@material-ui/icons/SaveAlt\";\r\nimport ArrowUpwardIcon from \"@material-ui/icons/ArrowUpward\";\r\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\r\n\r\nimport DisplayNotes from \"./DisplayNotes\";\r\nimport {\r\n  setSpecimanScore,\r\n  setSpecimanPlaying,\r\n} from \"../actions/populationActions\";\r\n\r\nfunction MidiDisplay({ progression, index, max, min }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const scoreUp = () => {\r\n    if (progression.score < 10)\r\n      dispatch(\r\n        setSpecimanScore({ index: index, score: progression.score + 1 })\r\n      );\r\n  };\r\n\r\n  const scoreDown = () => {\r\n    if (progression.score > 0)\r\n      dispatch(\r\n        setSpecimanScore({ index: index, score: progression.score - 1 })\r\n      );\r\n  };\r\n\r\n  const play = () => {\r\n    const callback = () => {\r\n      dispatch(setSpecimanPlaying({ index: index }));\r\n    };\r\n    progression.play(callback);\r\n  };\r\n\r\n  const download = () => {\r\n    progression.download();\r\n  };\r\n\r\n  let scoreMeter = [];\r\n  let tempScore = progression.score;\r\n  for (let i = 0; i < 10; i++) {\r\n    if (tempScore > 0) {\r\n      scoreMeter.push(<div className=\"w-100 score-bar score-bar-color\"></div>);\r\n      tempScore--;\r\n    } else {\r\n      scoreMeter.push(<div className=\"w-100 score-bar\"></div>);\r\n    }\r\n  }\r\n  scoreMeter.reverse();\r\n\r\n  return (\r\n    <Container className=\"p-0 h-100\">\r\n      <Row className=\"w-100 m-0 h-100\">\r\n        <DisplayNotes\r\n          color=\"#c62828\"\r\n          progression={progression}\r\n          max={max}\r\n          min={min}\r\n        />\r\n        {!progression.amIPlaying && (\r\n          <div className=\"overlay play border-color\" onClick={play}>\r\n            <PlayCircleOutlineIcon\r\n              style={{ fontSize: 80 }}\r\n              className=\"overlay-text\"\r\n            />\r\n          </div>\r\n        )}\r\n        {progression.amIPlaying && (\r\n          <div className=\"overlay play border-color\" onClick={play}>\r\n            <PauseCircleOutlineIcon\r\n              style={{ fontSize: 80 }}\r\n              className=\"overlay-text\"\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"overlay up-vote border-color\" onClick={scoreUp}>\r\n          <ArrowUpwardIcon style={{ fontSize: 60 }} className=\"overlay-text\" />\r\n        </div>\r\n        <div className=\"overlay down-vote border-color\" onClick={scoreDown}>\r\n          <ArrowDownwardIcon\r\n            style={{ fontSize: 60 }}\r\n            className=\"overlay-text\"\r\n          />\r\n        </div>\r\n        <div className=\"download border-color\" onClick={download}>\r\n          <SaveAltIcon style={{ fontSize: 20 }} className=\"overlay-text\" />\r\n        </div>\r\n        <div className=\"score\">{scoreMeter}</div>\r\n        <div className=\"score\">\r\n          <small className=\"score-text\">score: {progression.score}</small>\r\n        </div>\r\n      </Row>\r\n      {/* <Row>\r\n        <Col sm={3}>\r\n          <small>\r\n            Score\r\n          </small>\r\n        </Col>\r\n        <Col sm={1} className='pl-2'>\r\n          <small>\r\n            {progression.score}\r\n          </small>\r\n        </Col>\r\n        <Col className='pl-2'>\r\n        <Slider\r\n          aria-labelledby=\"discrete-slider\"\r\n          valueLabelDisplay=\"auto\"\r\n          min={0}\r\n          max={100}\r\n          onChange={setScore}\r\n          value={progression.score}\r\n        />\r\n        </Col>\r\n      </Row> */}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default React.memo(MidiDisplay);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport MidiDisplay from \"./MidiDisplay\";\r\nimport { Jumbotron, Container, Row, Col } from \"reactstrap\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction Grid() {\r\n  const numberPerRow = 4;\r\n  const population = useSelector((state) => {\r\n    return state.population;\r\n  });\r\n\r\n  const [populationFormatted, setPopulationFormatted] = useState([]);\r\n  useEffect(() => {\r\n    let arr = [...population];\r\n    let populationFormatted = [];\r\n    while (arr.length) populationFormatted.push(arr.splice(0, numberPerRow));\r\n    setPopulationFormatted(populationFormatted);\r\n  }, [population]);\r\n\r\n  const max = Math.max(\r\n    ...population.map((progression) =>\r\n      Math.max(\r\n        ...progression.notes.map((chord) =>\r\n          Math.max(...chord.chord.map((note) => note.hight), chord.root.hight)\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  const min = Math.min(\r\n    ...population.map((progression) =>\r\n      Math.min(\r\n        ...progression.notes.map((chord) =>\r\n          Math.min(...chord.chord.map((note) => note.hight), chord.root.hight)\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  return (\r\n    <Jumbotron className=\"p-4\">\r\n      <Container>\r\n        {populationFormatted.map((row, i) => {\r\n          return (\r\n            <Row key={i}>\r\n              {row.map((progression, j) => {\r\n                return (\r\n                  <Col\r\n                    className=\"m-1 midi-field p-2 pb-3\"\r\n                    key={j}\r\n                    style={{ height: \"170px\", \"min-width\": \"150px\" }}\r\n                  >\r\n                    <MidiDisplay\r\n                      progression={progression}\r\n                      index={i * numberPerRow + j}\r\n                      max={max}\r\n                      min={min}\r\n                    />\r\n                  </Col>\r\n                );\r\n              })}\r\n            </Row>\r\n          );\r\n        })}\r\n      </Container>\r\n    </Jumbotron>\r\n  );\r\n}\r\n\r\nexport default Grid;\r\n","export class Genome{\r\n    constructor(chords, rythm, scale){\r\n        let chordNotes = chords.map(chord => chord.chord)\r\n        if(!chordNotes.flat()){\r\n            chordNotes = chords.map(chord => chord.root)\r\n        }\r\n        //const notes = [...new Set(chordNotes.flat())]\r\n        //let mean = notes.reduce((a, b) => a + b) / notes.length;\r\n        const length = rythm.reduce((a, b) => a + b);\r\n        \r\n        this.scale= scale\r\n        this.length= length\r\n        this.switches= rythm.length\r\n        //this.mean= mean\r\n    }\r\n}","export const rythms = [\r\n    1/8,\r\n    1/4,\r\n    1/2,\r\n    3/4,\r\n    1,\r\n    2,\r\n    3,\r\n    4\r\n]\r\n\r\nexport function mapRythm(input){\r\n    let output = []\r\n    let sum = input\r\n    while(sum!==0){\r\n        for(let i = rythmMap.length-1; i >= 0; i--){\r\n            const currentValue = 1/parseInt(rythmMap[i])\r\n            if(sum>=currentValue){\r\n                output.push(rythmMap[i])\r\n                sum-=currentValue\r\n                break\r\n            }\r\n        }\r\n    }\r\n    return output\r\n}\r\n\r\nexport const rythmMap = [\r\n    '64',\r\n    '32',\r\n    '16',\r\n    '8',\r\n    '4',\r\n    '2',\r\n    '1',\r\n]\r\n// const lengths = [2,4,8]\r\n\r\nexport function constructRythm(length, window){\r\n    let currentLength = 0;\r\n    let rythmStructure = []\r\n    let previousValue= 0\r\n\r\n    const max = window.max\r\n    const min = window.min\r\n    while(currentLength<length){\r\n        let diff = 0 ;\r\n        let randomNumber = Math.floor(Math.random() *  (max-min))+min \r\n        if(Math.random()<0.4 && previousValue!==0){\r\n            randomNumber = previousValue\r\n        } else {\r\n            previousValue = randomNumber\r\n        }\r\n\r\n        if(currentLength+rythms[randomNumber]-diff>length){\r\n            diff = length - currentLength\r\n            rythmStructure.push({rythm: diff,beginning: currentLength})\r\n            currentLength+=diff\r\n            return rythmStructure\r\n        }\r\n\r\n        rythmStructure.push({rythm: rythms[randomNumber]-diff,beginning: currentLength})\r\n        currentLength+=rythms[randomNumber]-diff\r\n    }\r\n\r\n    return rythmStructure\r\n}","const notesMap = [\r\n    'C',\r\n    'C#',\r\n    'D',\r\n    'D#',\r\n    'E',\r\n    'F',\r\n    'F#',\r\n    'G',\r\n    'G#',\r\n    'A',\r\n    'A#',\r\n    'B'\r\n  ]\r\n\r\nexport class Note{\r\n    constructor(hight, start, duration) {\r\n        this.hight = hight\r\n        this.start = start\r\n        this.end = start+duration\r\n        this.duration = duration\r\n\r\n        const octave = Math.floor(hight/12);\r\n        const note = notesMap[hight%12];\r\n        this.note = note+octave.toString();\r\n    }\r\n\r\n    existsInWindow(window){\r\n        if((window[0]>this.start && window[0]<this.end)||(window[1]>this.start && window[1]<=this.end)){\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n}","const maj = 'major'\r\nconst min = 'minor'\r\n\r\n\r\nexport const scales = {\r\n    major: {\r\n        notes: [0,2,4,5,7,9,11],\r\n        mode: [maj,min, min, maj, maj, min, min]\r\n    }\r\n}\r\n\r\nexport const chords = {\r\n    major:[0,4,7,2,11,6,9,1,8,3,10,5],\r\n    minor:[0,3,7,2,10,5,9,4,11,6,8,1]\r\n}\r\n\r\nexport function RandomChord(octave,scaleType,numberOfNotes, jazziness){\r\n    const scale = scales[scaleType]\r\n    const randomNote = Math.floor(Math.random() * scale.notes.length);\r\n\r\n    const mode = scale.mode[randomNote]\r\n    let rootNote = scale.notes[randomNote]\r\n\r\n    if(numberOfNotes===0){\r\n        rootNote+=12*3\r\n        return {root: rootNote, chord: []}\r\n    }\r\n    let chord = randomVoicing(rootNote,mode, numberOfNotes,scale.notes,jazziness,octave)\r\n\r\n    let transposed = chord.map(x => x + 12*(3+octave))\r\n    if(Math.random()-(1/4)>rootNote/12)\r\n        rootNote+=12\r\n\r\n    return {chord: transposed, root: rootNote+12}\r\n}\r\n\r\nfunction randomVoicing(root,mode,numberOfNotes, scale, jazziness=5, octave, dispersion = 0){\r\n    let chord = []\r\n    let overload=0\r\n    for(let i = 0; i<numberOfNotes; i++){\r\n        const choice = Math.floor(Math.random() * jazziness + Math.floor(overload/(jazziness*2)))\r\n        let note = chords[mode][choice];\r\n        note += root\r\n        if(Math.random()<(((choice/(1+octave))/12) - dispersion)){\r\n            note+=12\r\n        }\r\n        if(Math.random()<(((note/2*(1+octave))/12) - dispersion) && choice!==0){\r\n            note-=12\r\n        }\r\n\r\n        if (chord.includes(note) || !scale.includes(note%12))\r\n        {\r\n            overload++\r\n            i--\r\n            continue\r\n        }\r\n        overload=0\r\n        chord.push(note)\r\n    }\r\n    return chord\r\n}","import * as Tone from \"tone\";\r\n\r\nconst gain = new Tone.Gain(0.2).toDestination();\r\nconst filter = new Tone.Filter({\r\n  frequency: 1000,\r\n  type: \"lowpass\",\r\n  rolloff: -12,\r\n  Q: 0,\r\n}).connect(gain);\r\n\r\nvar isPlaying = 0;\r\nvar tempo = 120;\r\n\r\nexport function getPlaying() {\r\n  return isPlaying;\r\n}\r\n\r\nexport let currentlyPlaying = null;\r\n\r\nexport function setPlaying(x) {\r\n  isPlaying = x;\r\n}\r\n\r\nexport function getTempo() {\r\n  return tempo;\r\n}\r\n\r\nexport function setTempo(x) {\r\n  tempo = x;\r\n}\r\n\r\nexport const synth = new Tone.PolySynth(Tone.Synth, {\r\n  oscillator: {\r\n    count: 2,\r\n    spread: 5,\r\n    type: \"sawtooth\",\r\n  },\r\n  // envelope: {\r\n  //   attack: 0.01,\r\n  //   decay: 15,\r\n  //   sustain: 0.20,\r\n  //   release: 0.1,\r\n  // },\r\n  envelope: {\r\n    attack: 0.002,\r\n    decay: 0,\r\n    sustain: 1,\r\n    release: 0.1,\r\n  },\r\n}).connect(filter);\r\n\r\n// synth.sync()\r\n","import { Genome } from \"./genome\";\r\nimport { constructRythm, rythms, mapRythm } from \"./rythm\";\r\nimport { Note } from \"./note\";\r\nimport { RandomChord } from \"./chords\";\r\nimport { synth, getPlaying, setPlaying, getTempo } from \"./synth\";\r\nimport { constructVoicing } from \"./population\";\r\nimport * as Tone from \"tone\";\r\nimport midiWriter from \"midi-writer-js\";\r\nimport FileSaver from \"file-saver\";\r\n\r\nexport function createRandomProgression(\r\n  jazziness,\r\n  numberOfNotes,\r\n  noteLengths = 0,\r\n  progressionLength\r\n) {\r\n  let octave = 0;\r\n  let notes = [];\r\n  let lengths = constructRythm(progressionLength, noteLengths);\r\n  const scale = Math.floor(Math.random() * 12);\r\n  for (let i = 0; i < lengths.length; i++) {\r\n    const chord = RandomChord(octave, \"major\", numberOfNotes - 1, jazziness);\r\n    notes.push({\r\n      chord: chord.chord.map(\r\n        (x) => new Note(x + scale, lengths[i].beginning, lengths[i].rythm)\r\n      ),\r\n      root: new Note(\r\n        chord.root + scale,\r\n        lengths[i].beginning,\r\n        lengths[i].rythm\r\n      ),\r\n    });\r\n  }\r\n\r\n  const genome = new Genome(notes, lengths, scale);\r\n  return new Progression({\r\n    notes: notes,\r\n    rythm: lengths.map((x) => x.rythm),\r\n    genome: genome,\r\n  });\r\n}\r\n\r\nexport class Progression {\r\n  constructor({ rythm, genome, score = 1, notes, amIPlaying = false }) {\r\n    this.notes = notes;\r\n    this.rythm = rythm;\r\n    this.genome = genome;\r\n    this.score = score;\r\n\r\n    this.amIPlaying = amIPlaying;\r\n  }\r\n\r\n  getAllNotes() {\r\n    return this.notes.map((chord) => [...chord.chord, chord.root]).flat();\r\n  }\r\n\r\n  play(callback) {\r\n    synth.sync();\r\n    if (Tone.Transport.state === \"stopped\") {\r\n      setPlaying(1);\r\n      let end = 0;\r\n      const notes = this.getAllNotes();\r\n      for (let i = 0; i < notes.length; i++) {\r\n        synth.triggerAttack(\r\n          notes[i].note,\r\n          (notes[i].start * 2 * 120) / getTempo()\r\n        );\r\n        synth.triggerRelease(\r\n          [notes[i].note],\r\n          (notes[i].end * 2 * 120) / getTempo()\r\n        );\r\n        if (notes[i].end > end) end = notes[i].end;\r\n      }\r\n      Tone.Transport.start();\r\n      callback();\r\n      setPlaying({\r\n        timeout: setTimeout(function () {\r\n          callback();\r\n          synth.releaseAll();\r\n          Tone.Transport.stop();\r\n          Tone.Transport.cancel();\r\n        }, (end * 2 * 1000 * 120) / getTempo()),\r\n        whichOne: () => callback(),\r\n      });\r\n    } else {\r\n      clearTimeout(getPlaying().timeout);\r\n      Tone.Transport.stop();\r\n      Tone.Transport.cancel();\r\n      synth.releaseAll();\r\n      if (!this.amIPlaying) {\r\n        if (getPlaying().whichOne) getPlaying().whichOne();\r\n        this.play(callback);\r\n      } else {\r\n        if (getPlaying().whichOne) getPlaying().whichOne();\r\n      }\r\n    }\r\n  }\r\n\r\n  compare(progression) {\r\n    const notes = progression.getAllNotes().map((note) => JSON.stringify(note));\r\n    const thisNotes = this.getAllNotes().map((note) => JSON.stringify(note));\r\n    let counter = 0;\r\n    for (let i = 0; i < notes.length; i++) {\r\n      if (thisNotes.includes(notes[i])) counter++;\r\n    }\r\n    if (counter === notes.length) return true;\r\n    return false;\r\n  }\r\n\r\n  download() {\r\n    var track = new midiWriter.Track();\r\n\r\n    for (let i = 0; i < this.notes.length; i++) {\r\n      track.addEvent(\r\n        [\r\n          new midiWriter.NoteEvent({\r\n            pitch: [\r\n              ...this.notes[i].chord.map((x) => x.note),\r\n              this.notes[i].root.note,\r\n            ],\r\n            duration: mapRythm(this.rythm[i]),\r\n          }),\r\n        ],\r\n        function (event, index) {\r\n          return { sequential: false };\r\n        }\r\n      );\r\n    }\r\n\r\n    var write = new midiWriter.Writer(track);\r\n    let blob;\r\n    blob = new Blob([write.buildFile()], {\r\n      type: \"audio/midi\",\r\n    });\r\n    FileSaver.saveAs(blob, \"midi\");\r\n  }\r\n\r\n  transpose(scale) {\r\n    const diff = scale - this.genome.scale;\r\n    const notes = this.notes.map((chord) => {\r\n      return {\r\n        chord: chord.chord.map(\r\n          (x) => new Note(x.hight + diff, x.start, x.duration)\r\n        ),\r\n        root: new Note(\r\n          chord.root.hight + diff,\r\n          chord.root.start,\r\n          chord.root.duration\r\n        ),\r\n      };\r\n    });\r\n    const genome = new Genome(notes, this.rythm, this.genome.scale + diff);\r\n    return new Progression({ ...this, genome, notes });\r\n  }\r\n\r\n  mutate(jazziness, noteLengths, mutationChance) {\r\n    let newProgression = this.mutateScale();\r\n    newProgression = this.mutateRythm(mutationChance, jazziness, noteLengths);\r\n    newProgression = this.mutateMelody(mutationChance, jazziness);\r\n    return newProgression;\r\n  }\r\n\r\n  mutateMelody(p, jazziness) {\r\n    let newRythm = [];\r\n    let notes = [];\r\n    let beginning = 0;\r\n    for (let i = 0; i < this.rythm.length; i++) {\r\n      if (Math.random() < p && i < this.rythm.length - 1) {\r\n        const tmp = RandomChord(\r\n          0,\r\n          \"major\",\r\n          this.notes[0].chord.length,\r\n          jazziness\r\n        );\r\n        const root = new Note(\r\n          tmp.root + this.genome.scale,\r\n          beginning,\r\n          this.rythm[i]\r\n        );\r\n        const chord = tmp.chord.map((x) => x + this.genome.scale);\r\n        notes.push({\r\n          chord: chord.map((note) => new Note(note, beginning, this.rythm[i])), // eslint-disable-line\r\n          root: new Note(root.hight, beginning, this.rythm[i]),\r\n        });\r\n        newRythm.push(this.rythm[i]);\r\n        beginning += this.rythm[i];\r\n        continue;\r\n      }\r\n      newRythm.push(this.rythm[i]);\r\n      beginning += this.rythm[i];\r\n      notes.push(this.notes[i]);\r\n    }\r\n    const genome = new Genome(notes, newRythm, this.genome.scale);\r\n    return new Progression({ ...this, genome, notes, rythm: newRythm });\r\n  }\r\n\r\n  mutateScale() {\r\n    const newScale = Math.floor(Math.random() * 3) - 1 + this.genome.scale;\r\n    return this.transpose(newScale);\r\n  }\r\n\r\n  mutateRythm(p, jazziness, window) {\r\n    let temp;\r\n    const [tempNewRythm, tempNotes] = this.joinChord(p, jazziness);\r\n    temp = new Progression({ ...this, notes: tempNotes, rythm: tempNewRythm });\r\n    const [newRythm, notes] = temp.breakChord(p, jazziness, window);\r\n    const genome = new Genome(notes, newRythm, this.genome.scale);\r\n    return new Progression({ ...this, genome, notes, rythm: newRythm });\r\n  }\r\n\r\n  breakChord(p, jazziness, window) {\r\n    let newRythm = [];\r\n    let notes = [];\r\n    let beginning = 0;\r\n    const max = window.max;\r\n    const min = window.min;\r\n    for (let i = 0; i < this.rythm.length; i++) {\r\n      let avaibleRythms = [];\r\n      rythms.forEach((x, index) => {\r\n        if (x < this.rythm[i] && index < max && index >= min)\r\n          avaibleRythms.push(x);\r\n      });\r\n      if (Math.random() < p && avaibleRythms.length > 0) {\r\n        const choice =\r\n          avaibleRythms[Math.floor(Math.random() * avaibleRythms.length)];\r\n\r\n        const tmp = RandomChord(\r\n          0,\r\n          \"major\",\r\n          this.notes[0].chord.length,\r\n          jazziness\r\n        );\r\n        const root = new Note(\r\n          tmp.root + this.genome.scale,\r\n          beginning,\r\n          this.rythm[i]\r\n        );\r\n        const chord = tmp.chord.map((x) => x + this.genome.scale);\r\n\r\n        if (Math.round(Math.random()) <= 2) {\r\n          notes.push({\r\n            chord: this.notes[i].chord.map(\r\n              (note) => new Note(note.hight, beginning, choice) // eslint-disable-line\r\n            ),\r\n            root: new Note(this.notes[i].root.hight, beginning, choice),\r\n          });\r\n          notes.push({\r\n            chord: chord.map(\r\n              (note) => // eslint-disable-line\r\n                new Note(note, beginning + choice, this.rythm[i] - choice)\r\n            ),\r\n            root: new Note(\r\n              root.hight,\r\n              beginning + choice,\r\n              this.rythm[i] - choice\r\n            ),\r\n          });\r\n          newRythm.push(this.rythm[i] - choice);\r\n          newRythm.push(choice);\r\n        } else {\r\n          notes.push({\r\n            chord: chord.map((note) => new Note(note, beginning, choice)), // eslint-disable-line\r\n            root: new Note(root.hight, beginning, choice),\r\n          });\r\n          notes.push({\r\n            chord: this.notes[i].chord.map(\r\n              (note) => // eslint-disable-line\r\n                new Note(note.hight, beginning + choice, this.rythm[i] - choice) \r\n            ),\r\n            root: new Note(\r\n              this.notes[i].root.hight,\r\n              beginning + choice,\r\n              this.rythm[i] - choice\r\n            ),\r\n          });\r\n          newRythm.push(choice);\r\n          newRythm.push(this.rythm[i] - choice);\r\n        }\r\n\r\n        beginning += this.rythm[i];\r\n        continue;\r\n      }\r\n      newRythm.push(this.rythm[i]);\r\n      beginning += this.rythm[i];\r\n      notes.push(this.notes[i]);\r\n    }\r\n    return [newRythm, notes];\r\n  }\r\n\r\n  joinChord(p, jazziness) {\r\n    let newRythm = [];\r\n    let notes = [];\r\n    let beginning = 0;\r\n    for (let i = 0; i < this.rythm.length; i++) {\r\n      if (Math.random() < p && i < this.rythm.length - 1) {\r\n        const chordsToJoin = [\r\n          ...this.notes[i].chord,\r\n          ...this.notes[i + 1].chord,\r\n        ];\r\n        const root = this.notes[i + Math.round(Math.random())].root;\r\n        const chord = constructVoicing(\r\n          chordsToJoin,\r\n          root,\r\n          this.genome.scale,\r\n          jazziness,\r\n          this.notes[i].chord.length\r\n        );\r\n        notes.push({\r\n          chord: chord.map(\r\n            (note) => // eslint-disable-line\r\n              new Note(note, beginning, this.rythm[i] + this.rythm[i + 1])\r\n          ),\r\n          root: new Note(\r\n            root.hight,\r\n            beginning,\r\n            this.rythm[i] + this.rythm[i + 1]\r\n          ),\r\n        });\r\n        newRythm.push(this.rythm[i] + this.rythm[i + 1]);\r\n        beginning += this.rythm[i] + this.rythm[i + 1];\r\n        i++;\r\n        continue;\r\n      }\r\n      newRythm.push(this.rythm[i]);\r\n      beginning += this.rythm[i];\r\n      notes.push(this.notes[i]);\r\n    }\r\n    return [newRythm, notes];\r\n  }\r\n}\r\n","import {createRandomProgression, Progression} from './progression'\r\nimport { Genome } from './genome'\r\nimport { Note } from './note'\r\nimport {scales, chords} from './chords'\r\n\r\nexport function createPopulation(size,jazziness, numberOfNotes, noteLengths, progressionLength) {\r\n    const population = []\r\n\r\n    for(let i =0; i<size; i++){\r\n        population.push(createRandomProgression(jazziness, numberOfNotes, noteLengths, progressionLength))\r\n    }\r\n    return population\r\n}\r\n\r\nexport function newGeneration(population, populationSize, jazziness, noteLengths, length, mutationChance){\r\n    let newPopulation = []\r\n    for(let i = 0; i<populationSize; i++){\r\n        const roulette = createRoulette(population.map(x => x.score))\r\n\r\n        const pick1 = pickSpeciman(roulette)\r\n        const pick2 = pickSpeciman(roulette)\r\n\r\n        const spec1 = population[pick1]\r\n        const spec2 = population[pick2]\r\n    \r\n        const crossed = cross(spec1,spec2, jazziness, length)\r\n        const mutated = crossed.mutate(jazziness, noteLengths, mutationChance)\r\n\r\n        let decision = 1\r\n        for(let j = 0; j<newPopulation.length; j++){\r\n            if(newPopulation[j].compare(mutated)){\r\n                i--\r\n                decision = 0\r\n                break\r\n            }\r\n        }\r\n        if(decision===1)\r\n            newPopulation.push(mutated)\r\n    }\r\n    return newPopulation\r\n}\r\n\r\nfunction createRoulette(scores){\r\n    const max = scores.reduce((a, b) => a + b);\r\n    const probabilities = scores.map(score => score/max)\r\n    return probabilities\r\n}\r\n\r\nfunction pickSpeciman(roulette){\r\n    const pick = Math.random();\r\n    let acc = 0\r\n    let i = 0\r\n    while(acc<pick){\r\n        acc += roulette[i]\r\n        i++\r\n    }\r\n    return i-1\r\n}\r\n\r\nexport function cross(prog1, prog2, jazziness, length){\r\n    const max = Math.max(prog1.genome.scale, prog2.genome.scale)\r\n    const min = Math.min(prog1.genome.scale, prog2.genome.scale)\r\n\r\n    const newScale = Math.floor(Math.random() * (max - min)) + min;\r\n\r\n    const prog1Transposed = prog1.transpose(newScale)\r\n    const prog2Transposed = prog2.transpose(newScale)\r\n\r\n    const newRythm = crossRythms(prog1Transposed.getAllNotes(), prog2Transposed.getAllNotes(), length)\r\n\r\n    const newMelody = crossMelodies(prog1Transposed, prog2Transposed, newRythm, newScale, prog1.notes[0].chord.length,jazziness)\r\n\r\n    const notes = buildNotes(newRythm, newMelody)\r\n\r\n    const genome = new Genome(notes, newRythm, newScale)\r\n    return new Progression({notes: notes, rythm: newRythm, genome: genome })\r\n}\r\n\r\nfunction crossMelodies(notes1, notes2, newRythm, originalScale, numberOfNotes, jazziness){\r\n    let newTimeline = 0\r\n    let newChords = []\r\n    for(let i=0; i<newRythm.length; i++){\r\n        const window=[newTimeline, newTimeline+newRythm[i]]\r\n\r\n        let candidates = []\r\n        notes1.notes.forEach(chord => {\r\n            if(chord.root.existsInWindow(window))\r\n                return candidates.push(chord.root)\r\n            return null\r\n        })\r\n\r\n        notes2.notes.forEach(chord => {\r\n            if(chord.root.existsInWindow(window))\r\n                return candidates.push(chord.root)\r\n            return null\r\n        })\r\n\r\n        candidates =  [...new Set(candidates)]\r\n\r\n        const choice = Math.floor(Math.random()*candidates.length)\r\n        const root = candidates[choice]\r\n\r\n        candidates = []\r\n        notes2.notes.forEach(chord => {\r\n            chord.chord.forEach(note => {\r\n            if(note.existsInWindow(window))\r\n                return candidates.push(note)\r\n            return null\r\n            })\r\n        })\r\n\r\n        notes1.notes.forEach(chord => {\r\n            chord.chord.forEach(note => {\r\n            if(note.existsInWindow(window))\r\n                return candidates.push(note)\r\n            return null\r\n            })\r\n        })\r\n\r\n        candidates =  [...new Set(candidates)]\r\n        const chord = constructVoicing(candidates, root, originalScale, jazziness, numberOfNotes)\r\n\r\n        newChords.push({chord,root:root.hight})\r\n        newTimeline += newRythm[i]\r\n    }\r\n    return newChords\r\n}\r\n\r\nexport function buildNotes(rythm, notes){\r\n    let newNotes = [] \r\n    let beginning = 0\r\n    for(let i = 0; i<rythm.length; i++){\r\n        const chord = notes[i]\r\n        newNotes.push({chord: chord.chord.map(x=>new Note(x,beginning, rythm[i])), root: new Note(chord.root,beginning, rythm[i])}) // eslint-disable-line\r\n        beginning+=rythm[i]\r\n    }\r\n    return newNotes\r\n}\r\n\r\nexport function constructVoicing(candidates, root, originalScale, jazziness, numberOfNotes){\r\n    const scale = scales['major']\r\n    const transposedRoot = (root.hight-originalScale)%12\r\n    const mode = scale.mode[scale.notes.indexOf(transposedRoot)]\r\n    let chord = []\r\n    let overload=0\r\n    for(let j = 0 ; j<numberOfNotes; j++ ){\r\n        const choice = candidates[Math.floor(Math.random()*candidates.length)].hight\r\n        if (chord.includes(choice) || !chords[mode].slice(0,jazziness + Math.floor(overload/(jazziness*2))).includes(((choice-root.hight)%12)))\r\n        {\r\n            overload++\r\n            j--\r\n            continue\r\n        }\r\n        overload=0\r\n        chord.push(choice)\r\n    }\r\n    return chord\r\n}\r\n\r\nfunction crossRythms(notes1, notes2, length){\r\n    let newRythm = []\r\n    let timeline = 0\r\n    let ends = [notes1.map(note => note.end).sort(),notes2.map(note => note.end).sort()]\r\n\r\n    while(timeline<length){\r\n        let choice = Math.round(Math.random())\r\n        for(let i = 0; i< ends[choice].length; i++){\r\n            if(ends[choice][i]>timeline){\r\n                newRythm.push(ends[choice][i]-timeline)\r\n                timeline = ends[choice][i]\r\n                break;\r\n            }\r\n            if(i===ends[choice].length-1){\r\n                newRythm.push(ends[choice][i]-timeline)\r\n                timeline = ends[choice][i]\r\n            }\r\n        }\r\n    }\r\n    return newRythm\r\n}\r\n","import React from 'react';\r\nimport {Button} from '@material-ui/core';\r\nimport { useSelector } from 'react-redux'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport { newGeneration} from '../genetic/population'\r\nimport {addSpeciman, deletePopulation} from '../actions/populationActions'\r\n\r\nfunction NewGeneration({updateGeneration, params}){\r\n  const dispatch = useDispatch()\r\n  \r\n    const population = useSelector(state => {\r\n        return state.population\r\n    })\r\n\r\n    const nextGen = () => {\r\n        dispatch(deletePopulation())\r\n        newGeneration(population, params.populationSize, params.jazziness, {min:params.windowmin,max:params.windowmax},params.progressionLength, params.mutationChance).map(x => dispatch(addSpeciman(x)))\r\n        updateGeneration()\r\n    }\r\n\r\n  return (\r\n    <Button variant=\"contained\" color=\"primary\" onClick={nextGen}>\r\n        Evolve\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default NewGeneration;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Jumbotron, Container, Row, Col } from \"reactstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Select,\r\n  MenuItem,\r\n  InputLabel,\r\n} from \"@material-ui/core\";\r\n\r\nimport { createPopulation } from \"../genetic/population\";\r\nimport { addSpeciman, deletePopulation } from \"../actions/populationActions\";\r\nimport NewGeneration from \"./NewGeneration\";\r\nimport { setTempo } from \"../genetic/synth\";\r\nimport { rythms } from \"../genetic/rythm\";\r\n\r\nfunction ControlPanel() {\r\n  const [generation, setGeneration] = useState(0);\r\n\r\n  const [state, setState] = useState({\r\n    populationSize: 8,\r\n    mutationChance: 0.1,\r\n    jazziness: 4,\r\n    numberOfNotes: 3,\r\n    progressionLength: 4,\r\n    windowmin: rythms[2],\r\n    windowmax: rythms[5],\r\n  });\r\n\r\n  const [tempo, settempo] = useState(120);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  let disabled = 0;\r\n  if (generation > 0) disabled = 1;\r\n\r\n  const handleChange = (e) => {\r\n    let contraint = false;\r\n    let value = parseFloat(e.target.value);\r\n\r\n    if (value > 0) {\r\n      if (e.target.name === \"tempo\") {\r\n        settempo(value);\r\n        setTempo(value);\r\n      } else if (!contraint)\r\n        setState({\r\n          ...state,\r\n          [e.target.name]: value,\r\n        });\r\n    }\r\n  };\r\n\r\n  const updateGeneration = () => {\r\n    setGeneration(generation + 1);\r\n  };\r\n\r\n  const restart = () => {\r\n    setGeneration(0);\r\n    dispatch(deletePopulation());\r\n    createPopulation(\r\n      state.populationSize,\r\n      state.jazziness,\r\n      state.numberOfNotes,\r\n      {\r\n        min: rythms.indexOf(state.windowmin),\r\n        max: rythms.indexOf(state.windowmax),\r\n      },\r\n      state.progressionLength\r\n    ).map((x) => dispatch(addSpeciman(x)));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (generation === 0) restart();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [state]);\r\n\r\n  return (\r\n    <Jumbotron className='p-4'>\r\n      <Container>\r\n        <Row>\r\n          <h2>Generation: {generation}</h2>\r\n        </Row>\r\n        <Row className=\"p-3\">\r\n          <Col>\r\n            <TextField\r\n              className=\"pr-3\"\r\n              InputProps={{ inputProps: { min: 1 } }}\r\n              name=\"populationSize\"\r\n              label=\"Population size\"\r\n              type=\"number\"\r\n              onChange={handleChange}\r\n              value={state.populationSize}\r\n            />\r\n            <TextField\r\n              InputProps={{ inputProps: { max: 1 } }}\r\n              name=\"mutationChance\"\r\n              label=\"Mutation chance\"\r\n              type=\"number\"\r\n              onChange={handleChange}\r\n              value={state.mutationChance}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <hr />\r\n        <Row className=\"p-3\">\r\n        <Col style={{'min-width': '80px'}}>\r\n            <TextField\r\n              className=\"w-100\"\r\n              InputProps={{ inputProps: { min: 1 } }}\r\n              name=\"tempo\"\r\n              label=\"Tempo\"\r\n              type=\"number\"\r\n              onChange={handleChange}\r\n              value={tempo}\r\n            />\r\n          </Col>\r\n          <Col style={{'min-width': '211px'}}>\r\n            <InputLabel className=\"m-0\" shrink>\r\n              Min. possible note length\r\n            </InputLabel>\r\n            <Select\r\n              className=\"w-100\"\r\n              name=\"windowmin\"\r\n              value={state.windowmin}\r\n              onChange={handleChange}\r\n            >\r\n              {rythms.map((rythm, index) => {\r\n                if (rythm < state.windowmax)\r\n                  return (\r\n                    <MenuItem key={index} value={rythm}>\r\n                      {rythm}\r\n                    </MenuItem>\r\n                  );\r\n                else return null;\r\n              })}\r\n            </Select>\r\n          </Col>\r\n          <Col style={{'min-width': '216px'}}>\r\n            <InputLabel className=\"m-0\" shrink>\r\n              Max. possible note length\r\n            </InputLabel>\r\n            <Select\r\n              className=\"w-100\"\r\n              name=\"windowmax\"\r\n              value={state.windowmax}\r\n              onChange={handleChange}\r\n            >\r\n              {rythms.map((rythm, index) => {\r\n                if (rythm > state.windowmin)\r\n                  return (\r\n                    <MenuItem key={index} value={rythm}>\r\n                      {rythm}\r\n                    </MenuItem>\r\n                  );\r\n                else return null;\r\n              })}\r\n            </Select>\r\n          </Col>\r\n          <Col style={{'min-width': '100px'}}>\r\n            <TextField\r\n              className=\"w-100\"\r\n              InputProps={{ inputProps: { min: state.numberOfNotes, max: 12 } }}\r\n              name=\"jazziness\"\r\n              label=\"Chord complexity\"\r\n              type=\"number\"\r\n              onChange={handleChange}\r\n              value={state.jazziness}\r\n            />\r\n          </Col>\r\n          <Col style={{'min-width': '120px'}}>\r\n            <TextField\r\n              className=\"w-100\"\r\n              InputProps={{ inputProps: { min: 1, max: 10 } }}\r\n              disabled={disabled}\r\n              name=\"numberOfNotes\"\r\n              label=\"No. of notes in a chord\"\r\n              type=\"number\"\r\n              onChange={handleChange}\r\n              value={state.numberOfNotes}\r\n            />\r\n          </Col>\r\n          <Col style={{'min-width': '100px'}}>\r\n            <TextField\r\n              className=\"w-100\"\r\n              InputProps={{ inputProps: { min: 1 } }}\r\n              disabled={disabled}\r\n              name=\"progressionLength\"\r\n              label=\"Progression Length\"\r\n              type=\"number\"\r\n              onChange={handleChange}\r\n              value={state.progressionLength}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={restart}>\r\n            Restart\r\n          </Button>\r\n          <NewGeneration\r\n            updateGeneration={updateGeneration}\r\n            params={{\r\n              ...state,\r\n              windowmin: rythms.indexOf(state.windowmin),\r\n              windowmax: rythms.indexOf(state.windowmax),\r\n            }}\r\n          />\r\n        </Row>\r\n      </Container>\r\n    </Jumbotron>\r\n  );\r\n}\r\n\r\nexport default ControlPanel;\r\n","import React, {useEffect, useState} from 'react';\r\nimport MidiDisplay from './MidiDisplay';\r\nimport {Jumbotron, Container, Row, Col} from 'reactstrap'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport { cross } from '../genetic/population'\r\n\r\nfunction Test() {\r\n\r\n    const [child, setChild] = useState(null)\r\n    const population = useSelector(state => {\r\n        return state.population\r\n    })\r\n\r\n    useEffect(() => {\r\n        if(population.length>1){\r\n            setChild(cross(population[0], population[1]))\r\n        }\r\n      }, [population]);\r\n    // population[0].notes = population[0].notes.map(x=>x.map(x=>50))\r\n    // population[0].notes2 = population[0].notes2.map(x=> x= new Note(50, x.start, x.duration))\r\n\r\nif (!child){\r\n    return null\r\n}\r\n  return (\r\n    <Jumbotron>\r\n        <Container>\r\n            <Row className='p-3'>\r\n                <Col><h2>Debug</h2></Col>\r\n            </Row>\r\n            <Row className='p-3'>\r\n                <h4>Parent 1:</h4>\r\n            </Row>\r\n            <Row>\r\n                <Col style={{height:\"300px\"}}>\r\n                    <MidiDisplay progression={population[0]} index={0}/>\r\n                </Col>\r\n            </Row>\r\n            <Row className='p-3'>\r\n                <h4>Parent 2:</h4>\r\n            </Row>\r\n            <Row>\r\n                <Col style={{height:\"300px\"}}>\r\n                    <MidiDisplay progression={population[1]} index={1}/>\r\n                </Col>\r\n            </Row>\r\n            <Row className='p-3'>\r\n                <h4>Child:</h4>\r\n            </Row>\r\n            <Row>\r\n                <Col style={{height:\"300px\"}}>\r\n                    <MidiDisplay progression={child}/>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    </Jumbotron>\r\n  );\r\n}\r\n\r\nexport default Test;\r\n","import Grid from './Grid'\nimport ControlPanel from './ControlPanel'\nimport Test from './Test'\nimport '../style/App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#c62828',\n    },\n    secondary: {\n      main: '#181a1b'\n    },\n  },\n}\n);\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <ControlPanel/>\n      <Router>\n        <Switch>\n          <Route path=\"/test\">\n            <Test />\n          </Route>\n          <Route path=\"/\">\n            <Grid />\n          </Route>\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nApp.whyDidYouRender = true\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { ADD_SPECIMAN, SET_SPECIMAN_SCORE, DELETE_POPULATION, SET_SPECIMAN_PLAYING } from \"../actions/actionTypes\";\r\nimport {Progression} from '../genetic/progression'\r\n\r\nconst initialState = [] ;\r\n\r\nconst populationReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_SPECIMAN: {\r\n        return [\r\n          ...state,\r\n          action.payload.speciman\r\n        ];\r\n      }\r\n\r\n      case DELETE_POPULATION: {\r\n        return [];\r\n      }\r\n\r\n      case SET_SPECIMAN_SCORE:{\r\n        return state.map((item, index) => {\r\n          if (index !== action.payload.index) {\r\n            return item\r\n          }\r\n          return new Progression({\r\n            ...item,\r\n            score: action.payload.score\r\n          })\r\n        })\r\n      }\r\n\r\n      case SET_SPECIMAN_PLAYING:{\r\n        return state.map((item, index) => {\r\n          if (index !== action.payload.index) {\r\n            return item\r\n          }\r\n          return new Progression({\r\n            ...item,\r\n            amIPlaying: !state[index].amIPlaying\r\n          })\r\n        })\r\n      }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nexport default populationReducer;\r\n","import { combineReducers } from 'redux';\r\nimport populationReducer from \"./populationReducer\";\r\n\r\nexport default combineReducers({ population: populationReducer });\r\n","import { createStore } from 'redux';\r\nimport rootReducer from \"../reducers/index\";\r\n\r\nexport default createStore(rootReducer);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './style/index.css';\n\nimport { Provider } from 'react-redux'\nimport store from './store/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}