(this["webpackJsonpmidi-generator"]=this["webpackJsonpmidi-generator"]||[]).push([[0],{76:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(0),o=n.n(r),c=n(14),s=n.n(c),i=(n(76),n(7)),u=n(8),l=n(128),j=n(129),h=n(133),d=n(42),b=new d.b(.2).toDestination(),p=new d.a({frequency:1e3,type:"lowpass",rolloff:-12,Q:0}).connect(b),f=new d.c(d.d,{oscillator:{count:2,spread:5,type:"sawtooth"},envelope:{attack:.002,decay:0,sustain:1,release:.1}}).connect(p),m=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function O(e,t){for(var n=t,a=0,r=function(t){setTimeout((function(){!function(e,t){var n=d.e(),a=(r=e,r.map((function(e){var t=Math.floor(e/12);return m[e%12]+t.toString()})));var r;f.triggerAttack(a,n),f.releaseAll(n+t)}(e[t],n[t])}),1e3*a),a+=n[t]},o=0;o<n.length;o++)r(o)}var v=n(26),x=n(138),g=n(61),y=n.n(g);function M(e){var t=e.notes,n=Object(r.useState)([]),o=Object(u.a)(n,2),c=o[0],s=o[1];return Object(r.useEffect)((function(){for(var e=Math.max.apply(Math,Object(i.a)(t.chords.map((function(e){return Math.max.apply(Math,Object(i.a)(e))})))),n=Math.min.apply(Math,Object(i.a)(t.chords.map((function(e){return Math.min.apply(Math,Object(i.a)(e))})))),r=[],o=0,c=0;c<t.rythm.length;c++)o+=t.rythm[c];for(var u=0;u<t.chords.length;u++){for(var l=t.chords[u],j=[],h=n;h<=e;h++)l.includes(h)?j.push(Object(a.jsx)("div",{style:{height:(1/(e-n)*100).toString()+"%",width:"100%","background-color":"#c62828"}})):j.push(Object(a.jsx)("div",{style:{height:(1/(e-n)*100).toString()+"%",width:"100%"}}));r.push(Object(a.jsx)("div",{style:{height:"100%",width:(t.rythm[u]/o*100).toString()+"%"},children:j.reverse()}))}s(r)}),[t]),c}var S=o.a.memo(M),z="ADD_SPECIMAN",w="SET_SPECIMAN_SCORE",C="DELETE_POPULATION";function N(e){var t=Object(v.b)();return Object(a.jsxs)(l.a,{className:"p-0 h-100",children:[Object(a.jsxs)(j.a,{className:"w-100 m-0 h-75",children:[Object(a.jsx)(S,{notes:e.progression.notes}),Object(a.jsx)("div",{className:"vote",onClick:function(){O(e.progression.notes.chords,e.progression.notes.rythm)},children:Object(a.jsx)(y.a,{style:{fontSize:80},className:"vote-text"})})]}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(h.a,{sm:3,children:Object(a.jsx)("small",{children:"Score"})}),Object(a.jsx)(h.a,{children:Object(a.jsx)(x.a,{"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:100,onChange:function(n,a){t(function(e){var t=e.index,n=e.score;return{type:w,payload:{index:t,score:n}}}({index:e.index,score:a}))},value:e.progression.score})})]})]})}var E=o.a.memo(N);var D=function(){var e=Object(v.c)((function(e){return e.population})),t=Object(r.useState)([]),n=Object(u.a)(t,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){for(var t=Object(i.a)(e),n=[];t.length;)n.push(t.splice(0,4));c(n)}),[e]),Object(a.jsx)(l.a,{children:o.map((function(e,t){return Object(a.jsx)(j.a,{children:e.map((function(e,n){return Object(a.jsx)(h.a,{style:{height:"200px"},children:Object(a.jsx)(E,{progression:e,index:4*t+n})},n)}))},t)}))})},k=n(20),A=n(3),P=n(136),F=n(137),T=[.5,3/4,1,1.5,2,3,4];var I="major",L="minor",_={major:{notes:[0,2,4,5,7,9,11],mode:[I,L,L,I,I,L,L]}},B={major:[0,4,7,2,11,6,9,1,8,3,10,5],minor:[0,3,7,2,10,5,9,4,11,6,8,1]};function G(e,t){for(var n=[],a=function(e){for(var t=0,n=[];t<e;){var a=0,r=Math.floor(Math.random()*T.length);if(t+T[r]-a>e)return t+=a=e-t,n.push(a),n;t+=T[r]-a,n.push(T[r]-a)}return n}(8),r=0;r<a.length;r++)n.push(J(0,"major",t,e+3));var o=Math.floor(12*Math.random());return{chords:n=n.map((function(e){return e.map((function(e){return e+o}))})),rythm:a}}function J(e,t,n,a){var r=_[t],o=Math.floor(Math.random()*r.notes.length),c=r.mode[o],s=r.notes[o],i=function(e,t,n,a){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=[],i=0,u=0;u<n;u++){var l=Math.floor(Math.random()*r+Math.floor(i/(2*r))),j=B[t][l];j+=e,Math.random()<l/(1+o)/12-c&&(console.log("dispersed up"),j+=12),Math.random()<j/2*(1+o)/12-c&&0!==l&&(console.log("dispersed down"),j-=12),!s.includes(j)&&a.includes(j%12)?s.push(j):(i++,u--)}return s}(s,c,n,r.notes,a,e).map((function(t){return t+36+12*e}));return Math.random()-1/4>s/12&&(s+=12),i.push(s+12),i}var R=function(){var e=Object(r.useState)(0),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)({populationSize:16,jazziness:2,numberOfNotes:3}),s=Object(u.a)(c,2),i=s[0],d=s[1],b=Object(v.b)(),p=function(e){d(Object(A.a)(Object(A.a)({},i),{},Object(k.a)({},e.target.name,e.target.value)))},f=function(){o(0),b({type:C}),function(e,t,n){for(var a=[],r=0;r<e;r++)a.push({notes:G(t,n),score:0});return a}(i.populationSize,i.jazziness,i.numberOfNotes).map((function(e){return b({type:z,payload:{speciman:e}})}))};return Object(r.useEffect)((function(){f()}),[i]),Object(a.jsxs)(l.a,{children:[Object(a.jsx)(j.a,{children:Object(a.jsxs)("h2",{children:["Generation: ",n]})}),Object(a.jsxs)(j.a,{className:"p-5",children:[Object(a.jsx)(h.a,{children:Object(a.jsx)(P.a,{name:"populationSize",label:"Population size",type:"number",onChange:p,value:i.populationSize})}),Object(a.jsx)(h.a,{children:Object(a.jsx)(P.a,{name:"jazziness",label:"Jazziness",type:"number",onChange:p,value:i.jazziness})}),Object(a.jsx)(h.a,{children:Object(a.jsx)(P.a,{name:"numberOfNotes",label:"Number of notes",type:"number",onChange:p,value:i.numberOfNotes})})]}),Object(a.jsx)(j.a,{children:Object(a.jsx)(F.a,{variant:"contained",color:"primary",onClick:f,children:"Restart"})})]})},q=(n(95),n(135)),Q=n(65),U=n(134),Y=Object(Q.a)({palette:{type:"dark",primary:{main:"#c62828"},secondary:{main:"#181a1b"}}});function H(){return Object(a.jsxs)(U.a,{theme:Y,children:[Object(a.jsx)(q.a,{children:Object(a.jsx)(R,{})}),Object(a.jsx)(q.a,{children:Object(a.jsx)(D,{})})]})}H.whyDidYouRender=!0;var K=H,V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))},W=(n(96),n(38)),X=[],Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return[].concat(Object(i.a)(e),[t.payload.speciman]);case C:return[];case w:return e.map((function(e,n){return n!==t.payload.index?e:Object(A.a)(Object(A.a)({},e),{},{score:t.payload.score})}));default:return e}},$=Object(W.b)({population:Z}),ee=Object(W.c)($);s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(v.a,{store:ee,children:Object(a.jsx)(K,{})})}),document.getElementById("root")),V()}},[[97,1,2]]]);
//# sourceMappingURL=main.69db6275.chunk.js.map