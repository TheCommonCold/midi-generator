{"version":3,"sources":["sound/player.js","components/MidiDisplay.jsx","sound/rythm.js","sound/chords.js","components/Grid.jsx","genetic/population.js","components/App.js","reportWebVitals.js","index.js"],"names":["gain","Tone","toDestination","filter","frequency","type","rolloff","Q","connect","synth","oscillator","count","spread","envelope","attack","decay","sustain","release","notesMap","playProgression","chords","rythm","lengths","delay","i","setTimeout","chord","duration","now","translatedNotes","notes","map","x","octave","Math","floor","toString","triggerAttack","releaseAll","playChord","length","MidiDisplay","props","cols","j","progression","rows","height","includes","push","style","width","reverse","Container","Row","className","Col","Button","onClick","rythms","maj","min","scales","major","mode","minor","createRandomProgression","currentLength","rythmStructure","diff","randomNumber","random","constructRythm","RandomChord","scale","note","scaleType","numberOfNotes","jazziness","randomNote","rootNote","transposed","choice","randomVoicing","Grid","populationFormatted","arr","splice","populationFormatter","size","population","createPopulation","row","App","Jumbotron","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f0a4c523.chunk.js","sourcesContent":["import * as Tone from 'tone'\r\n\r\nconst gain = new Tone.Gain(0.2).toDestination();\r\nconst filter = new Tone.Filter({frequency: 1000, type: \"lowpass\", rolloff: -12, Q: 0}).connect(gain);\r\n\r\nconst synth = new Tone.PolySynth(Tone.Synth,{\r\n  oscillator : {\r\n    count: 2,\r\n    spread: 5,\r\n    type : \"sawtooth\",\r\n  },\r\n  // envelope: {\r\n  //   attack: 0.01,\r\n  //   decay: 15,\r\n  //   sustain: 0.20,\r\n  //   release: 0.1,\r\n  // },\r\n    envelope: {\r\n    attack: 0.002,\r\n    decay: 0,\r\n    sustain: 1,\r\n    release: 0.1,\r\n  },\r\n}).connect(filter);\r\n\r\nconst notesMap = [\r\n  'C',\r\n  'C#',\r\n  'D',\r\n  'D#',\r\n  'E',\r\n  'F',\r\n  'F#',\r\n  'G',\r\n  'G#',\r\n  'A',\r\n  'A#',\r\n  'B'\r\n]\r\n\r\nexport function playProgression(chords, rythm){\r\n  let lengths = rythm\r\n  let delay = 0\r\n  for(let i = 0; i<lengths.length; i++){\r\n      setTimeout(function(){ playChord(chords[i],lengths[i]); }, delay*1000);\r\n      delay += lengths[i]\r\n  }\r\n}\r\n\r\nexport function playChord(chord,duration){\r\n  const now = Tone.now()\r\n  const translatedNotes = translateNumbersIntoNotes(chord)\r\n  synth.triggerAttack(translatedNotes, now);\r\n  synth.releaseAll ( now + duration);\r\n}\r\n\r\nfunction translateNumbersIntoNotes(notes){\r\n  return notes.map(x => {\r\n    const octave = Math.floor(x/12);\r\n    const note = notesMap[x%12];\r\n    return note+octave.toString();\r\n  })\r\n}\r\n\r\nexport function noteOn(midiNote, duration) {\r\n\r\n  var ac = new window.AudioContext();\r\n  var o = ac.createOscillator();\r\n  var g = ac.createGain();\r\n  var f = ac.createBiquadFilter();\r\n  const freq = Math.pow(2, (midiNote-69)/12)*440;\r\n  o.frequency.value = freq;\r\n  o.type = 'sawtooth';\r\n  o.connect(g);\r\n  g.gain.value = 0.25;\r\n  g.connect(f);\r\n  f.frequency.value = 1000;\r\n  f.connect(ac.destination)\r\n  o.start(0);\r\n  setTimeout(function(s) {s.stop(0)}, duration, o);\r\n\r\n  // var ac = new (window.AudioContext || window.webkitAudioContext);\r\n  // var freqs = [261.63, 329.63, 392.00];\r\n  // for(var i=0;i<freqs.length;i++) {\r\n  //   var o = ac.createOscillator();\r\n  //   var g = ac.createGain();\r\n  //   o.frequency.value = freqs[i];\r\n  //   o.connect(g);\r\n  //   g.gain.value = 0.25;\r\n  //   g.connect(ac.destination);\r\n  //   o.start(0);\r\n  //   setTimeout(function(s) {s.stop(0)}, 1000, o);\r\n  // }\r\n}\r\n","import React from 'react';\r\nimport {Container, Row, Col, Button} from 'reactstrap'\r\nimport {playProgression} from '../sound/player'\r\n\r\n\r\nfunction MidiDisplay(props){\r\n  const height = 60\r\n\r\n  const play = () => {\r\n    playProgression(props.progression.chords, props.progression.rythm)\r\n  }\r\n\r\n  const baseLine = 12\r\n  let cols = []\r\n  let length = 0\r\n  for(let j = 0; j<props.progression.rythm.length; j++ ){\r\n    length+=props.progression.rythm[j]\r\n  }\r\n  for(let j = 0; j<props.progression.chords.length; j++ ){\r\n    const chord = props.progression.chords[j]\r\n    let rows = []\r\n    for(let i = baseLine; i<height+baseLine; i++ ){\r\n      if(chord.includes(i))\r\n        rows.push(\r\n          <div style={{height: (1/height*100).toString()+'%', width:'100%', \"background-color\":'red'}}>\r\n          </div>)\r\n      else\r\n        rows.push(\r\n          <div style={{height: (1/height*100).toString()+'%', width:'100%'}}>\r\n          </div>)\r\n    }\r\n    cols.push(<div style={{height: '100%', width: (props.progression.rythm[j]/length*100).toString()+'%'}}>{rows.reverse()}</div>)\r\n  }\r\n  return (<Container>\r\n    <Row>\r\n    <Row className='w-100' style={{height:\"200px\"}}>{cols}</Row>\r\n    <Col>\r\n      <Button className='w-100' onClick={play}>Play progression</Button>\r\n      </Col>\r\n    </Row>\r\n  </Container>)\r\n}\r\n\r\nexport default MidiDisplay;\r\n","const rythms = [1/2,3/4,1,3/2,2,3,4]\r\n// const lengths = [2,4,8]\r\n\r\nexport function constructRythm(length){\r\n    let currentLength = 0;\r\n    let rythmStructure = []\r\n    while(currentLength<length){\r\n        let diff = 0 ;\r\n        let randomNumber = Math.floor(Math.random() * rythms.length)\r\n\r\n        if(currentLength+rythms[randomNumber]-diff>length){\r\n            diff = length - currentLength\r\n            currentLength+=diff\r\n            rythmStructure.push(diff)\r\n            return rythmStructure\r\n        }\r\n\r\n        currentLength+=rythms[randomNumber]-diff\r\n        rythmStructure.push(rythms[randomNumber]-diff)\r\n    }\r\n\r\n    return rythmStructure\r\n}","import {constructRythm} from './rythm'\r\n\r\nconst maj = 'major'\r\nconst min = 'minor'\r\n\r\n\r\nconst scales = {\r\n    major: {\r\n        notes: [0,2,4,5,7,9,11],\r\n        mode: [maj,min, min, maj, maj, min, min]\r\n    }\r\n}\r\n\r\nconst chords = {\r\n    major:[0,4,7,2,11,6,9,1,8,3,10,5],\r\n    minor:[0,3,7,2,10,5,9,4,11,6,8,1]\r\n}\r\n\r\n\r\nexport function createRandomProgression(){\r\n    let chords = []\r\n    let lengths = constructRythm(8)\r\n    for(let i = 0; i<lengths.length; i++){\r\n        chords.push(RandomChord(0,'major',2,5))\r\n    }\r\n    const scale = Math.floor(Math.random() * 12)\r\n\r\n    chords = chords.map(chord => chord.map(note => note + scale))\r\n\r\n    return {chords, rythm: lengths}\r\n}\r\n\r\nexport function RandomChord(octave,scaleType,numberOfNotes, jazziness){\r\n    const scale = scales[scaleType]\r\n    const randomNote = Math.floor(Math.random() * scale.notes.length);\r\n\r\n    const mode = scale.mode[randomNote]\r\n    let rootNote = scale.notes[randomNote]\r\n\r\n    let chord = randomVoicing(mode, numberOfNotes,scale.notes,jazziness)\r\n\r\n    let transposed = chord.map(x => x + rootNote +36 + (12*octave))\r\n    if(Math.random()-(1/4)>rootNote/12)\r\n        rootNote+=12\r\n    // transposed.push(rootNote+24)\r\n    transposed.push(rootNote+12)\r\n\r\n    return transposed\r\n}\r\n\r\nfunction randomVoicing(mode,numberOfNotes, scale, jazziness=5){\r\n    let chord = []\r\n    for(let i = 0; i<numberOfNotes; i++){\r\n        const choice = Math.floor(Math.random() * jazziness)\r\n        let note = chords[mode][choice];\r\n        if (chord.includes(note) || !scale.includes(note))\r\n        {\r\n            i--\r\n            continue\r\n        }\r\n        if(Math.random()<choice/24)\r\n            note+=12\r\n        chord.push(note)\r\n    }\r\n    return chord\r\n}\r\n","import React from 'react';\r\nimport MidiDisplay from './MidiDisplay';\r\nimport {Container, Row, Col} from 'reactstrap'\r\nimport {createPopulation} from '../genetic/population'\r\n\r\nfunction Grid(props) {\r\n\r\n    const numberPerRow = 4;\r\n    const population = createPopulation(16);\r\n\r\n    const populationFormatter = (arr) => {\r\n        let populationFormatted = []\r\n        while(arr.length) populationFormatted.push(arr.splice(0,numberPerRow));\r\n        return populationFormatted\r\n    }\r\n\r\n    const populationFormatted = populationFormatter(population)\r\n  return (\r\n    <Container>\r\n        {populationFormatted.map(row => {\r\n            return (\r\n                <Row>\r\n                    {\r\n                        row.map(progression => {\r\n                            return (\r\n                            <Col>\r\n                            <MidiDisplay progression={progression}/>\r\n                            </Col>\r\n                            )\r\n                        })\r\n                    }\r\n                </Row>\r\n            )\r\n        })}\r\n      <Row>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Grid;\r\n","import {createRandomProgression} from '../sound/chords'\r\n\r\nexport function createPopulation(size) {\r\n    const population = []\r\n\r\n    for(let i =0; i<size; i++){\r\n        population.push(createRandomProgression())\r\n    }\r\n    return population\r\n}\r\n","import Grid from './Grid'\nimport '../style/App.css';\nimport {Jumbotron} from 'reactstrap'\n\n\nfunction App() {\n  return (\n    <Jumbotron>\n      <Grid/>\n    </Jumbotron>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}